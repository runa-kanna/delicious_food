
<div class="cover-user-edit">
  <div class="container">
    <div class="row justify-content-center">
      <h1 class="font-weight-normal mt-5 mb-5">プロフィール編集</h1>
    </div>
    <div class="row justify-content-center">
      <%= form_with model: @user, local:true do |f| %>
      <div class="form-group">
        <label class="form-label">名前</label>
        <%= f.text_field :name, autofocus: true, id:"inputName", placeholder:"名前", class: "form-control" %>
      </div>
      <div class="form-group">
        <label class="form-label">プロフィール画像</label><br>
        <%= f.file_field :profile_image, class: "img_field", style: 'display:none;' %>
        <%= image_tag @user.get_profile_image(200,200), onClick: "$('.img_field').click()", class: "img_prev" %>
        <img id="preview" style="width:200px;">
      </div>
      <div class="form-group">
        <label class="form-label">プロフィール</label>
        <%= f.text_field :introduction, class: "form-control" %><br>
      </div>
      <table class="user-edit">
        <tr>
          <td style="width: 200px">
            <%= f.submit '保存する', class: "btn btn-outline-dark" %>
          </td>
          <td style="width: 200px">
            <%= link_to '退会する', unsubscribe_user_path, class: "btn btn-outline-dark" %>
          </td>
        </tr>
      </table>
      <% end %>
    </div>
  </div>
</div>

<script>
  $('#user_profile_image').on('change', function (e) {
    var reader = new FileReader();
    reader.onload = function (e) {
        $("#preview").attr('src', e.target.result);
    }
    reader.readAsDataURL(e.target.files[0]);
});
</script>